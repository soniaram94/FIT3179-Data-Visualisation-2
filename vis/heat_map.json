{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": { "step": 17 },
  "background": "#ffffff",

  "data": {
    "url": "https://raw.githubusercontent.com/soniaram94/FIT3179-Data-Visualisation-2/main/data/disability_core_limitation_2022.csv",
    "format": {"type": "csv"}
  },

  "params": [
    { 
      "name": "showValues", 
      "value": false, 
      "bind": {"input": "checkbox", "name": "Show values"}
    }
  ],

  "layer": [
    {
      "mark": { "type": "rect", "stroke": "#f0f0f0", "strokeWidth": 1 },
      "encoding": {
        "y": {
          "field": "Age group (years)",
          "type": "ordinal",
          "sort": [
            "0–4","5–14","15–24","25–34","35–44","45–54","55–59",
            "60–64","65–69","70–74","75–79","80–84","85–89","90 and over"
          ],
          "title": "Age group",
          "axis":{"labelFontSize":12}
        },
        "x": {
          "field": "Category",
          "type": "ordinal",
          "title": "Limitation / restriction category",
          "axis": {"labelAngle": -45, "labelAlign": "right", "labelLimit": 200,"labelFontSize":10}
        },
        "color": {
          "field": "Estimate (\\'000)",
          "type": "quantitative",
          "title": "Estimate ('000)",
          "scale": { 
            "scheme": "tealblues"
          },
          "legend": {
            "orient": "right",
            "direction": "vertical",
            "titleLimit": 150
          }
        },
        "tooltip": [
          {"field": "Age group (years)", "title": "Age group"},
          {"field": "Category", "title": "Category"},
          {"field": "Estimate (\\'000)", "title": "Estimate ('000)", "format": ",.1f"}
        ]
      }
    },
    {
      "transform": [{"filter": "showValues"}],
      "mark": {"type": "text", "baseline": "middle", "fontSize": 15},
      "encoding": {
        "y": {
          "field": "Age group (years)", 
          "type": "ordinal",
          "sort": [
            "0–4","5–14","15–24","25–34","35–44","45–54","55–59",
            "60–64","65–69","70–74","75–79","80–84","85–89","90 and over"
          ]
        },
        "x": {"field": "Category", "type": "ordinal"},
        "text": {"field": "Estimate (\\'000)", "format": ".1f"},
        "color": {
          "condition": {"test": "datum['Estimate (\\'000)'] > 80", "value": "white"},
          "value": "black"
        }
      }
    }
  ],

  "config": {
    "view": { "stroke": null },
    "axis": { 
      "grid": false, 
      "labelFontSize": 10, 
      "titleFontSize": 10,
      "labelLimit": 200
    },
    "legend": { 
      "titleFontSize": 13,
      "labelFontSize": 11
    },
    "checkbox": {
      "labelFontSize": 10
    }
  }
}